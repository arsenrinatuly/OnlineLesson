<!DOCTYPE html>
<html>
<head>
    <title>Список товаров</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
</head>
<body>
    <h1>Все товары</h1>

    {% if products %}
        {% load bbcode_tags %}

        {% for product in products %}
            <div>
                <h2>{{ product.title }}</h2>
                <p>{{ product.description|bbcode }}</p>
                <p>Цена: {{ product.price }}</p>
                <p>В наличии: {{ product.available|yesno:"Да,Нет" }}</p>
                <p>Категории:
                    {% for cat in product.categories.all %}
                        {{ cat.name }}{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </p>
            </div>
        {% endfor %}
        
        </ul>
        <div class="pagination">
            {% if page_obj.has_previous %}
                <a href="?page=1">Первая</a>
                <a href="?page={{ page_obj.previous_page_number }}"> < Назад </a>
            {% endif %}
            <span>Страница {{ page_obj.number}} из {{ page_obj.paginator.num_pages }}</span>

            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}"> Вперед > </a>
                <a href="?page={{ page_obj.paginator.num_pages }}"> Последняя </a>
            {% endif %}
        </div>
    {% else %}
        <p>Товаров пока нет.</p>
    {% endif %}
</body>
</html>
